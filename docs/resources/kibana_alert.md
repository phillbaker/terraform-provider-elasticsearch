---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "elasticsearch_kibana_alert Resource - terraform-provider-elasticsearch"
subcategory: "Elasticsearch Xpack"
description: |-
  Alerts allow you to define rules to detect conditions and trigger actions when those conditions are met. Alerts work by running checks on a schedule to detect conditions. When a condition is met, the alert tracks it as an alert instance and responds by triggering one or more actions. Actions typically involve interaction with Kibana services or third party integrations. For more see the docs https://www.elastic.co/guide/en/kibana/current/alerting-getting-started.html.
---

# elasticsearch_kibana_alert (Resource)

Alerts allow you to define rules to detect conditions and trigger actions when those conditions are met. Alerts work by running checks on a schedule to detect conditions. When a condition is met, the alert tracks it as an alert instance and responds by triggering one or more actions. Actions typically involve interaction with Kibana services or third party integrations. For more see the [docs](https://www.elastic.co/guide/en/kibana/current/alerting-getting-started.html).

## Example Usage

```terraform
resource "elasticsearch_kibana_alert" "test" {
  name = "terraform-alert"
  schedule {
    interval = "1m"
  }
  conditions {
    aggregation_type     = "avg"
    term_size            = 6
    threshold_comparator = ">"
    time_window_size     = 5
    time_window_unit     = "m"
    group_by             = "top"
    threshold            = [1000]
    index                = [".test-index"]
    time_field           = "@timestamp"
    aggregation_field    = "sheet.version"
    term_field           = "name.keyword"
  }
  actions {
    id             = "c87f0dc6-c301-4988-aee9-95d391359a39"
    action_type_id = ".index"
    params = {
      level   = "info"
      message = "alert '{{alertName}}' is active for group '{{context.group}}':\n\n- Value: {{context.value}}\n- Conditions Met: {{context.conditions}} over {{params.timeWindowSize}}{{params.timeWindowUnit}}\n- Timestamp: {{context.date}}"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **name** (String) The name of the alert, does not have to be unique, used to identify and find an alert.

### Optional

- **actions** (Block Set) Actions are invocations of Kibana services or integrations with third-party systems, that run as background tasks on the Kibana server when alert conditions are met. (see [below for nested schema](#nestedblock--actions))
- **alert_type_id** (String) The ID of the alert type that you want to call when the alert is scheduled to run, defaults to `.index-threshold`.
- **conditions** (Block Set, Max: 1) The conditions under which the alert is active, they create an expression to be evaluated by the alert type executor. These parameters are passed to the executor `params`. There may be specific attributes for different alert types. Either `params_json` or `conditions` must be specified. (see [below for nested schema](#nestedblock--conditions))
- **consumer** (String) The name of the application that owns the alert. This name has to match the Kibana Feature name, as that dictates the required RBAC privileges. Defaults to `alerts`.
- **enabled** (Boolean) Whether the alert is scheduled for evaluation.
- **notify_when** (String) The condition for throttling the notification: `onActionGroupChange`, `onActiveAlert`, or `onThrottleInterval`. Only available in Kibana >= 7.11
- **params_json** (String) JSON body of alert `params`. Either `params_json` or `conditions` must be specified.
- **schedule** (Block List, Max: 1) How frequently the alert conditions are checked. Note that the timing of evaluating alerts is not guaranteed, particularly for intervals of less than 10 seconds (see [below for nested schema](#nestedblock--schedule))
- **tags** (Set of String) A list of tag names, they appear in the alert listing in the UI which is searchable by tag.
- **throttle** (String) How often this alert should fire the same action, this reduces repeated notifications.

### Read-Only

- **id** (String) The ID of this resource.

<a id="nestedblock--actions"></a>
### Nested Schema for `actions`

Required:

- **action_type_id** (String) The type of the action, e.g. `.index`, `.webhook`, etc.
- **id** (String) The identifier of the saved action object, a UUID.

Optional:

- **group** (String) When to execute the action, e.g. `threshold met` or `recovered`.
- **params** (Map of String) Key value pairs passed to the action executor, e.g. a Mustache formatted `message`.


<a id="nestedblock--conditions"></a>
### Nested Schema for `conditions`

Required:

- **index** (Set of String)
- **threshold** (Set of Number)
- **threshold_comparator** (String)
- **time_field** (String)
- **time_window_size** (Number)
- **time_window_unit** (String)

Optional:

- **aggregation_field** (String)
- **aggregation_type** (String)
- **group_by** (String)
- **term_field** (String)
- **term_size** (Number)


<a id="nestedblock--schedule"></a>
### Nested Schema for `schedule`

Required:

- **interval** (String) Specifies the interval in seconds, minutes, hours or days at which the alert should execute, e.g. 10s, 5m, 1h.


